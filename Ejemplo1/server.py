# Nombre: Rolando Eynar Pari Cahuna - Redireccion a otra pagina web - Ejemplo

from http.server import BaseHTTPRequestHandler, HTTPServer
from urllib.parse import urlparse, parse_qs

class RedirectHandler(BaseHTTPRequestHandler):
    def do_GET(self):

        parsed_path = urlparse(self.path)
        query_components = parse_qs(parsed_path.query)
        
        if 'nombre' in query_components:
            # Obtiene la URL a la que redirigir del parámetro 'url'
            redirect_url = query_components['nombre'][0]
            # Envía un código de estado 302 para la redirección
            self.send_response(302)
            # Añade el header para la redirección
            self.send_header('Location', redirect_url)
            self.end_headers()
        else:
            # Si no hay un parámetro 'url', muestra un mensaje simple
            self.send_response(200)
            self.send_header('Content-type', 'text/html')
            self.end_headers()
            self.wfile.write(b"Por favor, proporciona un nombre como parametro '?nombre=Rolando'")

def run(server_class=HTTPServer, handler_class=RedirectHandler, port=8080):
    server_address = ('', port)
    httpd = server_class(server_address, handler_class)
    print(f'Iniciando servidor HTTP en el puerto {port}...')
    httpd.serve_forever()

if __name__ == '__main__':
    run()